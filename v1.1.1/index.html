<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · GeoEnergyIO.jl</title><meta name="title" content="Home · GeoEnergyIO.jl"/><meta property="og:title" content="Home · GeoEnergyIO.jl"/><meta property="twitter:title" content="Home · GeoEnergyIO.jl"/><meta name="description" content="Documentation for GeoEnergyIO.jl."/><meta property="og:description" content="Documentation for GeoEnergyIO.jl."/><meta property="twitter:description" content="Documentation for GeoEnergyIO.jl."/><meta property="og:url" content="https://sintefmath.github.io/GeoEnergyIO.jl/"/><meta property="twitter:url" content="https://sintefmath.github.io/GeoEnergyIO.jl/"/><link rel="canonical" href="https://sintefmath.github.io/GeoEnergyIO.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>GeoEnergyIO.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Parsing-of-simulation-cases"><span>Parsing of simulation cases</span></a></li><li><a class="tocitem" href="#Parsing-and-processing-of-corner-point-grids"><span>Parsing and processing of corner-point grids</span></a></li><li><a class="tocitem" href="#Utilities"><span>Utilities</span></a></li><li><a class="tocitem" href="#Index-of-functions"><span>Index of functions</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/sintefmath/GeoEnergyIO.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/sintefmath/GeoEnergyIO.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="GeoEnergyIO"><a class="docs-heading-anchor" href="#GeoEnergyIO">GeoEnergyIO</a><a id="GeoEnergyIO-1"></a><a class="docs-heading-anchor-permalink" href="#GeoEnergyIO" title="Permalink"></a></h1><p>Documentation for <a href="https://github.com/sintefmath/GeoEnergyIO.jl">GeoEnergyIO</a>.</p><h2 id="Parsing-of-simulation-cases"><a class="docs-heading-anchor" href="#Parsing-of-simulation-cases">Parsing of simulation cases</a><a id="Parsing-of-simulation-cases-1"></a><a class="docs-heading-anchor-permalink" href="#Parsing-of-simulation-cases" title="Permalink"></a></h2><p>The main feature of this module is at the time of writing a parser for .DATA reservoir simulation cases. The format originated with the Eclipse reservoir simulator produced by SLB and is now used by many reservoir simulators. The most useful publicly available description of one such dialect is found in the <a href="https://opm-project.org/?page_id=955">OPM Flow manual</a>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GeoEnergyIO.InputParser.parse_data_file" href="#GeoEnergyIO.InputParser.parse_data_file"><code>GeoEnergyIO.InputParser.parse_data_file</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">parse_data_file(filename; units = :si)
parse_data_file(filename; units = :field)
data = parse_data_file(&quot;MY_MODEL.DATA&quot;)</code></pre><p>Parse a .DATA file given by the path in <code>filename</code> (industry standard input file) into a Dict with String keys. Units will be converted to strict SI unless you pass an alternative unit system like <code>units = :field</code>. Setting <code>units = nothing</code> will skip unit conversion. Note that the simulators in JutulDarcy.jl assumes that the unit system is internally consistent. It is highly recommended to parse to the SI units if you want to perform simulations with JutulDarcy.jl.</p><p>The best publicly available documentation on this format is available from the Open Porous Media (OPM) project&#39;s webpages: <a href="https://opm-project.org/?page_id=955">OPM Flow manual </a>.</p><p><strong>Keyword arguments</strong></p><ul><li><code>warn_parsing=true</code>: Produce a warning when keywords are not supported (or partially supported) by the parser.</li><li><code>warn_feature=true</code>: Produce a warning when keywords are supported, but have limited or missing support in the numerical solvers in <code>JutulDarcy.jl</code>.</li><li><code>units=:si</code>: Symbol that indicates the unit system to be used in the output. Setting this to <code>nothing</code> will return values without conversion, i.e. exactly what is in the input files. <code>:si</code> will use strict SI. Other alternatives are <code>:field</code> and <code>:metric</code>. <code>:lab</code> is currently unsupported.</li><li><code>verbose=false</code>: Produce verbose output about parsing progress. For larger files, a lot of output will be generated. Useful when figuring out where a parser fails or spends a lot of time.</li></ul><p><strong>Note</strong></p><p>This function only covers a small portion of the keywords that exist for various simulators. You will get warnings that indicate the level of support for keywords in both the parser and the numerical solvers when known keywords with limited support. Pull requests for new keywords are welcome!</p><p>The SUMMARY section is skipped due to the large volume of available keywords that are not essential to define simulation cases.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/GeoEnergyIO.jl/blob/821516904546be5e860de7ef7a2846e1499580ba/src/InputParser/parser.jl#L61-L98">source</a></section></article><h2 id="Parsing-and-processing-of-corner-point-grids"><a class="docs-heading-anchor" href="#Parsing-and-processing-of-corner-point-grids">Parsing and processing of corner-point grids</a><a id="Parsing-and-processing-of-corner-point-grids-1"></a><a class="docs-heading-anchor-permalink" href="#Parsing-and-processing-of-corner-point-grids" title="Permalink"></a></h2><p>Corner-point meshes are the de-facto standard format for simulation of subsurface flow. These meshes are semi-structured, but can have quite complex structure in practice due to eroded and collapsed cells and the presence of faults. This module includes a processor to convert the input format into a mesh that can be used for simulation. Converting the corner-points into a mesh with a connected topology is non-trivial, but the included algorithm has been verified on a number of real-field assets.</p><p>There are two main functions to parse and process corner-point inputs:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GeoEnergyIO.InputParser.parse_grdecl_file" href="#GeoEnergyIO.InputParser.parse_grdecl_file"><code>GeoEnergyIO.InputParser.parse_grdecl_file</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">parse_grdecl_file(&quot;mygrid.grdecl&quot;; actnum_path = missing, kwarg...)</code></pre><p>Parse a GRDECL file separately from the full input file. Note that the GRID section does not contain units - passing the <code>input_units</code> keyword is therefore highly recommended.</p><p><strong>Keyword arguments</strong></p><ul><li><code>actnum_path=missing</code>: Path to ACTNUM file, if this is not included in the main file.</li><li><code>units=:si</code>: Units to use for return values. Requires <code>input_units</code> to be set.</li><li><code>input_units=nothing</code>: The units the file is given in.</li><li><code>verbose=false</code>: Toggle verbosity.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/GeoEnergyIO.jl/blob/821516904546be5e860de7ef7a2846e1499580ba/src/InputParser/parser.jl#L242-L255">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GeoEnergyIO.CornerPointGrid.mesh_from_grid_section" href="#GeoEnergyIO.CornerPointGrid.mesh_from_grid_section"><code>GeoEnergyIO.CornerPointGrid.mesh_from_grid_section</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">mesh_from_grid_section(f, actnum = missing)</code></pre><p>Generate a Jutul unstructured mesh from a grid section. The input arugment <code>f</code> can be one of the following:</p><ul><li>An already parsed complete data file read using <code>parse_data_file</code>. The &quot;GRID&quot; field will be used.</li><li>A parsed &quot;GRID&quot; section from <code>parse_grdecl_file</code>.</li><li>The file-name of a <code>.GRDECL</code> file to be parsed before processing.</li></ul><p>Optionally the <code>actnum</code> can be specified separately. The <code>actnum</code> should have equal length to the number of logical cells in the grid with true/false indicating if a cell is to be included in the processed mesh.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/GeoEnergyIO.jl/blob/821516904546be5e860de7ef7a2846e1499580ba/src/CornerPointGrid/interface.jl#L1-L15">source</a></section></article><h3 id="Example-corner-point-meshes"><a class="docs-heading-anchor" href="#Example-corner-point-meshes">Example corner point meshes</a><a id="Example-corner-point-meshes-1"></a><a class="docs-heading-anchor-permalink" href="#Example-corner-point-meshes" title="Permalink"></a></h3><p>The module ships with several corner point grids suitable for testing. These include partially collapsed cells, faults and other degenerate cases that the parser should be able to handle. We can make a few plots of such test grids. The first example is a single hexahedral cell:</p><pre><code class="language-julia hljs">using GeoEnergyIO, Jutul, CairoMakie
pth = GeoEnergyIO.test_input_file_path(&quot;grdecl&quot;, &quot;1cell.txt&quot;, base = missing)
grdecl = parse_grdecl_file(pth)
g = mesh_from_grid_section(grdecl)
fig, ax, plt = plot_mesh(g, shading = false, rasterize = true)
Jutul.plot_mesh_edges!(ax, g)
fig</code></pre><img src="index-9ed94006.png" alt="Example block output"/><p>To understand a bit more of how this format behaves in practice, we can look at a faulted mesh:</p><pre><code class="language-julia hljs">using GeoEnergyIO, Jutul, CairoMakie
pth = GeoEnergyIO.test_input_file_path(&quot;grdecl&quot;, &quot;raised_col_sloped.txt&quot;, base = missing)
grdecl = parse_grdecl_file(pth)
g = mesh_from_grid_section(grdecl)
fig, ax, plt = plot_mesh(g, shading = NoShading, rasterize = true)
Jutul.plot_mesh_edges!(ax, g)
fig</code></pre><img src="index-297766c2.png" alt="Example block output"/><p>More complicated meshes include multiple faults. One synthetic test model is the <code>model3</code> case from <a href="https://www.mrst.no">MRST</a>:</p><pre><code class="language-julia hljs">using GeoEnergyIO, Jutul, CairoMakie
pth = GeoEnergyIO.test_input_file_path(&quot;grdecl&quot;, &quot;model3_5_5_5.txt&quot;, base = missing)
grdecl = parse_grdecl_file(pth)
g = mesh_from_grid_section(grdecl)
ix = collect(1:number_of_cells(g))
fig = Figure()
ax = Axis3(fig[1,1], zreversed = true, azimuth = 2.0)
plot_cell_data!(ax, g, ix, shading = NoShading, rasterize = true, colormap = :seaborn_icefire_gradient)
fig</code></pre><img src="index-29032147.png" alt="Example block output"/><p>We can also parse a high-resolution version of the same case:</p><pre><code class="language-julia hljs">using GeoEnergyIO, Jutul, CairoMakie
pth = GeoEnergyIO.test_input_file_path(&quot;grdecl&quot;, &quot;model3_20_20_50.txt&quot;, base = missing)
grdecl = parse_grdecl_file(pth)
g = mesh_from_grid_section(grdecl)
ix = collect(1:number_of_cells(g))
fig = Figure()
ax = Axis3(fig[1,1], zreversed = true, azimuth = 2.0)
plot_cell_data!(ax, g, ix, shading = NoShading, rasterize = true, colormap = :seaborn_icefire_gradient)
fig</code></pre><img src="index-5f1b28fd.png" alt="Example block output"/><p>The parser has been tested on many complex models. Here is an example mesh parsed from the <a href="https://doi.org/10.1007/s10596-020-10003-4">OLYMPUS Optimization Benchmark Challenge</a> where the parsed porosity is plotted together with the wells:</p><p><img src="assets/olympus_small.gif" alt="image"/></p><h2 id="Utilities"><a class="docs-heading-anchor" href="#Utilities">Utilities</a><a id="Utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Utilities" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GeoEnergyIO.InputParser.get_data_file_cell_region" href="#GeoEnergyIO.InputParser.get_data_file_cell_region"><code>GeoEnergyIO.InputParser.get_data_file_cell_region</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">region = get_data_file_cell_region(data, t::Symbol; active = nothing)
satnum = get_data_file_cell_region(data, :satnum)
pvtnum = get_data_file_cell_region(data, :pvtnum, active = 1:10)</code></pre><p>Get the region indicator of some type for each cell of the domain stored in <code>data</code> (the output from <a href="#GeoEnergyIO.InputParser.parse_data_file"><code>parse_data_file</code></a>). The optional keyword argument <code>active</code> can be used to extract the values for a subset of cells.</p><p><code>t</code> should be one of the following:</p><ul><li><code>:satnum</code> (saturation function region)</li><li><code>:pvtnum</code> (PVT function region)</li><li><code>:eqlnum</code> (equilibriation region)</li><li><code>:eosnum</code> (equation-of-state region)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/GeoEnergyIO.jl/blob/821516904546be5e860de7ef7a2846e1499580ba/src/InputParser/utils.jl#L545-L559">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GeoEnergyIO.InputParser.number_of_tables" href="#GeoEnergyIO.InputParser.number_of_tables"><code>GeoEnergyIO.InputParser.number_of_tables</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">number_of_tables(outer_data, t::Symbol)</code></pre><p>Number of declared tables for given type <code>t</code>. Should be one of the following:</p><ul><li><code>:satnum</code> (saturation function region)</li><li><code>:pvtnum</code> (PVT function region)</li><li><code>:eqlnum</code> (equilibriation region)</li><li><code>:eosnum</code> (equation-of-state region)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/GeoEnergyIO.jl/blob/821516904546be5e860de7ef7a2846e1499580ba/src/InputParser/utils.jl#L505-L513">source</a></section></article><h2 id="Index-of-functions"><a class="docs-heading-anchor" href="#Index-of-functions">Index of functions</a><a id="Index-of-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Index-of-functions" title="Permalink"></a></h2><ul><li><a href="#GeoEnergyIO.CornerPointGrid.mesh_from_grid_section"><code>GeoEnergyIO.CornerPointGrid.mesh_from_grid_section</code></a></li><li><a href="#GeoEnergyIO.InputParser.get_data_file_cell_region"><code>GeoEnergyIO.InputParser.get_data_file_cell_region</code></a></li><li><a href="#GeoEnergyIO.InputParser.number_of_tables"><code>GeoEnergyIO.InputParser.number_of_tables</code></a></li><li><a href="#GeoEnergyIO.InputParser.parse_data_file"><code>GeoEnergyIO.InputParser.parse_data_file</code></a></li><li><a href="#GeoEnergyIO.InputParser.parse_grdecl_file"><code>GeoEnergyIO.InputParser.parse_grdecl_file</code></a></li></ul></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Monday 13 May 2024 13:02">Monday 13 May 2024</span>. Using Julia version 1.10.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
