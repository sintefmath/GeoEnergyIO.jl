<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Parsing of simulation cases · GeoEnergyIO.jl</title><meta name="title" content="Parsing of simulation cases · GeoEnergyIO.jl"/><meta property="og:title" content="Parsing of simulation cases · GeoEnergyIO.jl"/><meta property="twitter:title" content="Parsing of simulation cases · GeoEnergyIO.jl"/><meta name="description" content="Documentation for GeoEnergyIO.jl."/><meta property="og:description" content="Documentation for GeoEnergyIO.jl."/><meta property="twitter:description" content="Documentation for GeoEnergyIO.jl."/><meta property="og:url" content="https://sintefmath.github.io/GeoEnergyIO.jl/parser/"/><meta property="twitter:url" content="https://sintefmath.github.io/GeoEnergyIO.jl/parser/"/><link rel="canonical" href="https://sintefmath.github.io/GeoEnergyIO.jl/parser/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">GeoEnergyIO.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Parsing of simulation cases</a><ul class="internal"><li><a class="tocitem" href="#Parsing-of-.DATA-files"><span>Parsing of .DATA files</span></a></li><li><a class="tocitem" href="#Parsing-of-.afi-files-and-RESQML"><span>Parsing of .afi files and RESQML</span></a></li><li><a class="tocitem" href="#Other-parsers"><span>Other parsers</span></a></li></ul></li><li><a class="tocitem" href="../cpgrid/">Parsing and processing of corner-point grids</a></li><li><a class="tocitem" href="../resdata/">resdata extension: Dealing with summary, restart and egrid files</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Parsing of simulation cases</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Parsing of simulation cases</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/sintefmath/GeoEnergyIO.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/sintefmath/GeoEnergyIO.jl/blob/main/docs/src/parser.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Parsing-of-simulation-cases"><a class="docs-heading-anchor" href="#Parsing-of-simulation-cases">Parsing of simulation cases</a><a id="Parsing-of-simulation-cases-1"></a><a class="docs-heading-anchor-permalink" href="#Parsing-of-simulation-cases" title="Permalink"></a></h1><h2 id="Parsing-of-.DATA-files"><a class="docs-heading-anchor" href="#Parsing-of-.DATA-files">Parsing of .DATA files</a><a id="Parsing-of-.DATA-files-1"></a><a class="docs-heading-anchor-permalink" href="#Parsing-of-.DATA-files" title="Permalink"></a></h2><p>The most significant feature of this module is a parser for .DATA reservoir simulation cases. The format originated with the Eclipse reservoir simulator produced by SLB and is now used by many reservoir simulators. The most useful publicly available description of one such dialect is found in the <a href="https://opm-project.org/?page_id=955">OPM Flow manual</a>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GeoEnergyIO.InputParser.parse_data_file" href="#GeoEnergyIO.InputParser.parse_data_file"><code>GeoEnergyIO.InputParser.parse_data_file</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">parse_data_file(filename; units = :si)
parse_data_file(filename; units = :field)
data = parse_data_file(&quot;MY_MODEL.DATA&quot;)</code></pre><p>Parse a .DATA file given by the path in <code>filename</code> (industry standard input file) into a Dict with String keys. Units will be converted to strict SI unless you pass an alternative unit system like <code>units = :field</code>. Setting <code>units = nothing</code> will skip unit conversion. Note that the simulators in JutulDarcy.jl assumes that the unit system is internally consistent. It is highly recommended to parse to the SI units if you want to perform simulations with JutulDarcy.jl.</p><p>The best publicly available documentation on this format is available from the Open Porous Media (OPM) project&#39;s webpages: <a href="https://opm-project.org/?page_id=955">OPM Flow manual </a>.</p><p><strong>Keyword arguments</strong></p><ul><li><code>warn_parsing=true</code>: Produce a warning when keywords are not supported (or partially supported) by the parser.</li><li><code>warn_feature=true</code>: Produce a warning when keywords are supported, but have limited or missing support in the numerical solvers in <code>JutulDarcy.jl</code>.</li><li><code>units=:si</code>: Symbol that indicates the unit system to be used in the output. Setting this to <code>nothing</code> will return values without conversion, i.e. exactly what is in the input files. <code>:si</code> will use strict SI. Other alternatives are <code>:field</code> and <code>:metric</code>. <code>:lab</code> is currently unsupported.</li><li><code>verbose=false</code>: Produce verbose output about parsing progress. For larger files, a lot of output will be generated. Useful when figuring out where a parser fails or spends a lot of time.</li></ul><p><strong>Note</strong></p><p>This function only covers a small portion of the keywords that exist for various simulators. You will get warnings that indicate the level of support for keywords in both the parser and the numerical solvers when known keywords with limited support. Pull requests for new keywords are welcome!</p><p>The SUMMARY section is skipped due to the large volume of available keywords that are not essential to define simulation cases.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/GeoEnergyIO.jl/blob/cd60650aa077c6a59c23df3e4a4d369b7a330a68/src/InputParser/parser.jl#L82-L119">source</a></section></article><p>Let us for example parse the SPE1 dataset, turning into a nested <code>Dict</code> containing all the entries of the data file. We use the unexported <code>test_input_file_path</code> utility to get the path of a test file.</p><pre><code class="language-julia hljs">using GeoEnergyIO
spe1_pth = GeoEnergyIO.test_input_file_path(&quot;SPE1&quot;, &quot;SPE1.DATA&quot;)
spe1 = parse_data_file(spe1_pth)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{String, Any} with 6 entries:
  &quot;RUNSPEC&quot;  =&gt; OrderedDict{String, Any}(&quot;TITLE&quot;=&gt;&quot;SPE1 - CASE 2&quot;, &quot;DIMENS&quot;=&gt;[1…
  &quot;GRID&quot;     =&gt; OrderedDict{String, Any}(&quot;cartDims&quot;=&gt;(10, 10, 3), &quot;CURRENT_BOX&quot;…
  &quot;PROPS&quot;    =&gt; OrderedDict{String, Any}(&quot;PVTW&quot;=&gt;Any[[2.77e7, 1.038, 4.67022e-1…
  &quot;SUMMARY&quot;  =&gt; OrderedDict{String, Any}()
  &quot;SCHEDULE&quot; =&gt; Dict{String, Any}(&quot;STEPS&quot;=&gt;OrderedDict{String, Any}[OrderedDict…
  &quot;SOLUTION&quot; =&gt; OrderedDict{String, Any}(&quot;EQUIL&quot;=&gt;Any[[2560.32, 3.30948e7, 2575…</code></pre><h3 id="Handling-unsupported-keywords"><a class="docs-heading-anchor" href="#Handling-unsupported-keywords">Handling unsupported keywords</a><a id="Handling-unsupported-keywords-1"></a><a class="docs-heading-anchor-permalink" href="#Handling-unsupported-keywords" title="Permalink"></a></h3><p>Not all keywords are supported by the parser, but not all keywords are important. The input format is such that it is difficult to automatically skip keywords, but you an manually add keywords to the skip list:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GeoEnergyIO.InputParser.skip_kw!" href="#GeoEnergyIO.InputParser.skip_kw!"><code>GeoEnergyIO.InputParser.skip_kw!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">skip_kw!(kw, num, msg = nothing)</code></pre><p>Add a keyword to list of records that will be skipped on parsing.</p><p><code>kw</code> is the symbol (usually capitalized) of the keyword to skip, num is the number of expected records:</p><ul><li>0 means that the keyword to skip has no data (for example &quot;WATER&quot; with no data to follow)</li><li>1 means that the keyword has a single record terminated by <code>/</code></li><li>Any other number means a fixed number of lines, without termination by empty record.</li><li>Inf means that the keyword has any number of records, terminated by a record without entries.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/GeoEnergyIO.jl/blob/cd60650aa077c6a59c23df3e4a4d369b7a330a68/src/InputParser/parser.jl#L1-L15">source</a></section></article><p>Adding keywords to the skip list is not persistent across Julia sessions and can be added to the top of your script. Contributions to the global skip list defined in the <code>__init__</code> function of the parser are welcome.</p><pre><code class="language-julia hljs">using GeoEnergyIO
# Skip keyword without data
GeoEnergyIO.InputParser.skip_kw!(:MY_KW, 0)
# Keyword with a single record of data, e.g.
# MY_DATA_KW
# &quot;some data&quot; 1 2 3 /
GeoEnergyIO.InputParser.skip_kw!(:MY_DATA_KW, 1)
# Keyword with many records, terminated by empty record:
# MY_LONG_DATA_KW
# &quot;some data&quot; 1 2 3 /
# &quot;more data&quot; 4 5 6 /
# &quot;even more data&quot; 1 9 /
# /
GeoEnergyIO.InputParser.skip_kw!(:MY_LONG_DATA_KW, Inf)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">71-element Vector{Tuple{Symbol, Union{Float64, Int64}, Union{Nothing, GeoEnergyIO.InputParser.PARSER_WARNING}}}:
 (:PETOPTS, 1, nothing)
 (:PARALLEL, 1, nothing)
 (:MULTSAVE, 1, nothing)
 (:VECTABLE, 1, nothing)
 (:MULTSAVE, 1, nothing)
 (:WHISTCTL, 1, GeoEnergyIO.InputParser.PARSER_JUTULDARCY_MISSING_SUPPORT)
 (:MEMORY, 1, nothing)
 (:OPTIONS3, 1, nothing)
 (:TSCRIT, 1, GeoEnergyIO.InputParser.PARSER_JUTULDARCY_MISSING_SUPPORT)
 (:CVCRIT, 1, GeoEnergyIO.InputParser.PARSER_JUTULDARCY_MISSING_SUPPORT)
 ⋮
 (:VFPPROD, Inf, GeoEnergyIO.InputParser.PARSER_MISSING_SUPPORT)
 (:VFPINJ, Inf, GeoEnergyIO.InputParser.PARSER_MISSING_SUPPORT)
 (:WTRACER, Inf, GeoEnergyIO.InputParser.PARSER_MISSING_SUPPORT)
 (:GCONINJE, Inf, GeoEnergyIO.InputParser.PARSER_MISSING_SUPPORT)
 (:WTEST, Inf, GeoEnergyIO.InputParser.PARSER_MISSING_SUPPORT)
 (:WLIST, Inf, GeoEnergyIO.InputParser.PARSER_MISSING_SUPPORT)
 (:MY_KW, 0, nothing)
 (:MY_DATA_KW, 1, nothing)
 (:MY_LONG_DATA_KW, Inf, nothing)</code></pre><h2 id="Parsing-of-.afi-files-and-RESQML"><a class="docs-heading-anchor" href="#Parsing-of-.afi-files-and-RESQML">Parsing of .afi files and RESQML</a><a id="Parsing-of-.afi-files-and-RESQML-1"></a><a class="docs-heading-anchor-permalink" href="#Parsing-of-.afi-files-and-RESQML" title="Permalink"></a></h2><p>The package includes experimental support for reading the .afi file format used by IX, as well as RESQML files for the dense data. Files that make use of .gsg files for input is not yet supported, but will parse the remainder of the .afi/ixf files.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GeoEnergyIO.IXParser.read_afi_file" href="#GeoEnergyIO.IXParser.read_afi_file"><code>GeoEnergyIO.IXParser.read_afi_file</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">read_afi_file(&quot;somefile.afi&quot;)
read_afi_file(fpath; verbose = true, convert = false, strict = false)</code></pre><p>Read .afi files. The .afi file is the main file of the IX input format and contains references to other files, such as .ixf and .epc files.</p><p><strong>Arguments</strong></p><ul><li><code>fpath::String</code>: Path to the .afi file.</li><li><code>verbose::Bool=true</code>: Whether to print progress messages.</li><li><code>convert::Bool=false</code>: Whether to convert the parsed records to more user-friendly with unit conversion applied. The output format is substantially altered by enabling this option.</li><li><code>strict::Bool=false</code>: Whether to throw errors on unrecognized keywords or unsupported files.</li></ul><p><strong>Notes</strong></p><p>For input of dense data (e.g. grid properties), the parser is limited to the RESQML format. This means that .gsg files are not supported.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/GeoEnergyIO.jl/blob/cd60650aa077c6a59c23df3e4a4d369b7a330a68/src/IXParser/parser.jl#L95-L114">source</a></section></article><p>This function is currently unexported and subject to change. To import:</p><pre><code class="language-julia hljs">import GeoEnergyIO.IXParser: read_afi_file
afi = read_afi_file(&quot;path/to/file.afi&quot;)</code></pre><h3 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h3><p>As an example, we can parse and convert the a OLYMPUS realization from the test suite, process it as a corner-point mesh, and plot the porosity.</p><pre><code class="language-julia hljs">using Jutul, GeoEnergyIO, GLMakie
import GeoEnergyIO.IXParser: read_afi_file
fn = GeoEnergyIO.test_input_file_path(&quot;OLYMPUS_25_AFI_RESQML&quot;, &quot;OLYMPUS_25.afi&quot;)
# Set the convert flag to convert data into &quot;processed&quot; format with converted units and keywords that can more easily be fed to other functions:
setup = read_afi_file(fn, convert = true)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{String, Any} with 2 entries:
  &quot;FM&quot; =&gt; Dict{String, Any}(&quot;MODEL_DEFINITION&quot;=&gt;Any[(keyword = &quot;Units&quot;, value =…
  &quot;IX&quot; =&gt; Dict{String, Any}(&quot;MODEL_DEFINITION&quot;=&gt;Any[(keyword = &quot;StructuredInfo&quot;…</code></pre><pre><code class="language-julia hljs">grid_sec = setup[&quot;IX&quot;][&quot;RESQML&quot;][&quot;GRID&quot;]
g = mesh_from_grid_section(grid_sec)
poro = vec(setup[&quot;IX&quot;][&quot;RESQML&quot;][&quot;POROSITY&quot;][&quot;values&quot;])
actnum = vec(grid_sec[&quot;ACTNUM&quot;])
fig, ax, plt = plot_cell_data(g, poro[actnum])
fig</code></pre><img src="c180de68.png" alt="Example block output"/><h2 id="Other-parsers"><a class="docs-heading-anchor" href="#Other-parsers">Other parsers</a><a id="Other-parsers-1"></a><a class="docs-heading-anchor-permalink" href="#Other-parsers" title="Permalink"></a></h2><h3 id="OBSH"><a class="docs-heading-anchor" href="#OBSH">OBSH</a><a id="OBSH-1"></a><a class="docs-heading-anchor-permalink" href="#OBSH" title="Permalink"></a></h3><p>There is an experimental parser for the observed well data format. This is unexported and subject to change:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GeoEnergyIO.IXParser.read_obsh_file" href="#GeoEnergyIO.IXParser.read_obsh_file"><code>GeoEnergyIO.IXParser.read_obsh_file</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">obs_data = read_obs_file(pth)
obs_data = read_obs_file(pth, reformat = true)</code></pre><p>Read an OBSH file from path <code>pth</code>. If <code>reformat</code> is true, the data is reformatted into a dictionary of wells, each containing a dictionary of data series and a vector of <code>DateTime</code> objects.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/GeoEnergyIO.jl/blob/cd60650aa077c6a59c23df3e4a4d369b7a330a68/src/IXParser/utils.jl#L27-L34">source</a></section></article><p>To make use of it, it must be explicitly imported:</p><pre><code class="language-julia hljs">import GeoEnergyIO.IXParser: read_obsh_file
obsh = read_obsh_file(&quot;path/to/FILE.OBSH&quot;)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../cpgrid/">Parsing and processing of corner-point grids »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Saturday 4 October 2025 12:35">Saturday 4 October 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
